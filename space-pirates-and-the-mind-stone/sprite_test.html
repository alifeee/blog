<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="./sprite.js" defer></script>
    <script src="//unpkg.com/alpinejs" defer></script>
  </head>
  <body>
    <div x-data>
      <div style="display: flex">
        <div id="asteroid"></div>
        <style scoped>
          #asteroid {
            background-image: url("./images/asteroid_spritesheet.png");
            height: 60px;
            width: 60px;
            background-color: blue;
          }
        </style>
        <sprite-img
          id="sprite"
          src="./images/asteroid_spritesheet.png"
          height="60"
          width="60"
          frames="6"
          looping="true"
          fps="3"
          x-ref="sprite"
        ></sprite-img>
      </div>

      <button x-on:click="$refs.sprite.pause()">Pause</button>
      <button x-on:click="$refs.sprite.play()">Play</button>
      <button x-on:click="$refs.sprite.reset()">Reset</button>
      <button x-on:click="$refs.sprite.stop()">Stop</button>
    </div>

    <h3>Click to play</h3>
    <div x-data>
      <sprite-img
        id="coalometer"
        src="./images/coalometer_spritesheet.png"
        height="32"
        width="32"
        frames="7"
        looping="false"
        fps="12"
        startpaused="true"
        scale="2"
        x-on:click="$el.play()"
        x-ref="coalometer"
      ></sprite-img>
      <button x-on:click="$refs.coalometer.reset()">Reset</button>
    </div>

    <!-- preload spinning image -->
    <h3>Hover to change animation</h3>
    <link
      rel="preload"
      as="image"
      href="./images/mindstone-spin_spritesheet.png"
    />
    <div x-data="{spinning: false}">
      <!-- x-bind:src="spinning ? './images/mindstone-spin_spritesheet.png' : './images/mindstone-idle_spritesheet.png'" -->
      <!-- src="./images/mindstone-idle_spritesheet.png" -->
      <sprite-img
        id="mindstone"
        src="./images/mindstone-idle_spritesheet.png"
        x-on:mouseenter="spinning = true;"
        x-on:mouseleave="spinning = false;"
        height="25"
        width="20"
        frames="8"
        looping="true"
        fps="5"
        startpaused="false"
        scale="5"
        :src="spinning ? './images/mindstone-spin_spritesheet.png' : './images/mindstone-idle_spritesheet.png'"
        :frames="spinning ? 10 : 8"
        :fps="spinning ? 10 : 5"
      ></sprite-img>
    </div>

    <h3>Hover to destroy (how to make it reappear?)</h3>
    <div x-data>
      <div style="display: flex">
        <template x-for="i in 3">
          <sprite-img
            class="spaceship"
            src="./images/spaceship_spritesheet.png"
            height="48"
            width="48"
            frames="15"
            looping="false"
            fps="10"
            startpaused="true"
            scale="2"
            x-on:mouseenter="$el.play()"
          >
          </sprite-img>
        </template>
      </div>
      <button
        onclick="document.querySelectorAll('.spaceship').forEach((ss) => {ss.reset()})"
      >
        Reset
      </button>
    </div>

    <h3>Change frame</h3>
    <div x-data="{frame: 0}">
      <sprite-img
        src="./images/coalometer_spritesheet.png"
        height="32"
        width="32"
        frames="7"
        startpaused="true"
        scale="2"
        x-bind:frame="frame"
      ></sprite-img>
      Frame: <span x-text="frame"></span>
      <input type="range" x-model="frame" min="0" max="6" />
    </div>
  </body>
</html>
